# 5. 着色

**着色** (shading) 指对不同物体应用不同材质。

着色只考虑自身物体的情况，不考虑对其他物体的影响（阴影等）。

## 5.1 简单着色模型

![Blinn-Phong 反射模型](../pic/blinnPhong.png)

对于 Blinn-Phong 反射模型，其光照主要包含三部分：

- 镜面反射光照
- 漫反射
- 间接光照

考虑一个点 (shading point) 的着色结果，可以将此点认为是一个极小的平面。因此有如下定义：

![着色点](../pic/shadingPoint.png)

- 观测方向 v
- 法线 n
- 光线方向 I
- 表面参数
  - 颜色
  - 反光度
  - ...

其中表示方向的向量都是单位向量。

### 5.1.1 漫反射

![漫反射](../pic/diffuseRefl.png)

漫反射将光线均匀地反射到各个方向。

不同的角度可能影响 **光通量** ，即接收光照的有效面积，从而使其变暗。

![角度对漫反射的影响](../pic/diffuseAngle.png)

其中 $cos{\theta} = n \cdot l$

对于点到光源的距离同样将影响光的强度。

![与光源的距离对漫反射的影响](../pic/diffuseDistance.png)

因此有：

$
L_d = k_d(I/r^2) max(0,n \cdot l)
$

其中：

- $L_d$ 漫反射亮度
- $k_d$ 漫反射系数
  - 不同材质表面对光能的吸收具有不同的效率。

![漫反射渲染结果](../pic/diffuseShading.png)
