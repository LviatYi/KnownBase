# 3. 词法分析

## 3.1 词法分析简介

### 3.1.1 词法分析的作用

词法分析是编译的第一阶段。

词法分析器的主要任务是：

- 读入源程序的输入字符。
- 将它们组成词素。
- 生成并输出一个词法单元序列，每个词法单元对应于一个词素。

生成的词法单元序列将被输出到语法分析器进行语法分析。

词法分析器通常还要和 **符号表** 进行交互。  
当词法分析器发现了一个标识符的词素时，它要将这个词素添加到符号表中。  
在某些情况下，词法分析器会从符号表中读取有关标识符种类的信息，以确定向语法分析器传送哪个词法单元。

![词法分析与语法分析间的交互](../pic/interactBetweenLex&Syn.svg "词法分析与语法分析间的交互")

> getNextToken 命令指示词法分析器从其输入中不断读取字符。

除此之外，词法分析还负责：

- 过滤注释与多余的空白符。
- 赋予行号。

### 3.1.2 词法单元、模式和词素

- **词法单元** 由一个词法单元名和一个可选的属性值组成。
  - 词法单元名是一个表示某种词法单位的抽象符号，比如一个特定的关键字，或者代表一个标识符的输入字符序列。
  - 词法单元名是由语法分析器处理的输入符号。
- **模式** 描述了一个词法单元的词素可能具有的形式。
  - 当词法单元是一个关键字时，它的模式就是组成这个关键字的字符序列。
  - 对于标识符和其他词法单元，模式是一个更加复杂的结构，它可以和很多符号串匹配。
- **词素** 是源程序中的一个字符序列，它和某个词法单元的模式匹配。
  - 被词法分析器识别为该词法单元的一个实例。

## 3.2 词法单元归约

**正则表达式** 是一种用来描述词素模式的重要表示方法。

> 虽然正则表达式不能表达出所有可能的模式，但是它们可以高效地描述在处理词法单元时要用到的模式类型。

## 3.2.1 串和语言

**字母表** (alphabet) 是一个有限的 **符号集合** 。  
符号的典型例子包括：

- 字母
- 数位
- 标点符号

> - **二进制字母表** (binary alphabet) {0,1} 。
> - **ASCII 码表** 被用于很多软件系统中。
> - **Unicode 字符集** 包含了大约 100000 个来自世界各地的字符。

某个字母表上的一个 **串** (string) 是该字母表中符号的一个有穷序列。

> 在语言理论中，术语「句子」和「字」常常被当作「串」的同义词。

[串的更多相关定义](language&grammer.md#String)
