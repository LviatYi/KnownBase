# 3. 数据库理论

## 3.1 关系数据模型

**关系数据库** 是目前应用最广泛的数据库模型，其建立在严格的关系数学理论基础之上
。

根据数据模型的三要素（结构、操作、完整性约束），关系数据模型由以下三部分组成：

- 关系数据结构
- 关系操作集合
- 关系完整性约束

### 3.1.1 关系数据结构

关系数据模型采用单一的数据结构，即 **关系** 来表示实体之间的联系。

从用户角度看，一个关系就是一个 **规范化** 的二维表。

- 规范化 指表中每列都是原子项，即没有「表中表」。

一个关系由以下三者组成：

- **关系名** 对应二维表的表名。
- **关系模式** 对应二维表的表头。
- **关系实例** 对应二维表的数据。

#### 3.1.1.1 常用术语

- **关系** (Relation) 一个关系指一张二维表。
- **元组** (Tuple) 一个元组指二维表中的一行。
- **属性** (Attribute) 一个属性指二维表中的一列，表中每列均有名称，即属性名。
- **键** (Key) 键也称码、关键字、关键码，指表中可唯一确定元组的属性或属性组合。
- **域** (Domain) 域指属性的取值范围。
- **分量** 分量指元组中的一个属性值。
- **关系模式** 关系模式是对关系「型」的描述，通常表示为
  ：`关系名 ( 属性 1 , 属性 2 , ... , 属性 n )`，是一系列属性的集合。

> 可以参照下表将术语联想至下表中对应的常用词汇：
>
> | 关系术语 | 现实世界词汇 |
> | -------- | ------------ |
> | 关系名   | 表名         |
> | 关系模式 | 表头         |
> | 关系     | 二维表       |
> | 元组     | 记录         |
> | 属性     | 列           |
> | 属性名   | 列名         |
> | 属性值   | 列值         |

#### 3.1.1.2 关系数据结构的形式化定义

##### 域 (Domain)

域是一组具有相同数据类型的值的集合。

> 可以是：  
> 整数实数介于某个取值范围的整数指定长度的字符串集合 { '男' ，'女' } 介于某个取
> 值范围的日期

##### 笛卡尔积 (Cartesian Product)

笛卡尔积有如下定义：

给定一组域 $D_1,D_2,\dots,D_n$ ，这些域中允许存在相同。 $D_1,D_2,\dots,D_n$ 的笛
卡尔积为：

$$D_1×D_2× \dots ×D_n＝\{(d_1,d_2, \dots ,d_n)｜d_i\in D_i , i＝1,2, \dots ,n \}$$

笛卡尔积具有如下属性：

- 所有域的所有取值的一个组合。
- 不能重复。

笛卡尔积中每个元素，即一组 $(d_1,d_2,\dots,d_n)$ ，称为一个 **n 元组** (n-tuple)
或简称 **元组** 。  
元组中的每一个值 $d_i$ 称为一个 **分量** 。  
**基数** 是关系中元组的个数。

笛卡尔积可以表示为一个二维表。表中每行对应一个元组，表中的每列对应一个域。

| 商品编号 | 商品类型 |
| -------- | -------- |
| 100101   | 食品     |
| 100102   | 服装     |
| 100103   | 文具     |
| 100104   | 食品     |
| 100105   | 日用品   |

##### 关系 (Relation)

$D_1×D_2×…×D_n$ 的任一子集称为在域 $D_1,D_2,\dots,D_n$ 上的关系，表示为

$$R (D_1,D_2,\dots ,D_n) $$

其中：

- **R** 关系名
- **n** 关系的目或度 (Degree)

关系具有如下特性：

- 数据库中，关系是笛卡尔积的有限子集。
- 承上性质，关系也是一个 **二维表** ，表的任意一行对应一个元组，表的每一列来自同
  一域。由于域可以相同，为了加以区别，必须为每列起一个名字，称为 **属性**
  (Attribute) 。n 元关系有 n 个属性，属性的名字唯一。
- 关系中元组个数是关系的基数。

关系中的每个元素是关系中的元组，通常用 t 表示。当 n=1 时，称该关系为单元关系
(Unary relation) 。当 n=2 时，称该关系为二元关系 (Binary relation) 。

#### 3.1.1.3 关系的性质

- 列是同质的 (Homogeneous) ，即每列中的分量必须是同一类型的数据。  
- 不同的列可以出自同一个域，但不同的属性必须赋予不同的属性名。  
- 列的顺序可以任意交换。交换时，应连同属性名一起交换。  
- 任意两个元组不能完全相同。  
- 关系中元组的顺序可任意，即可任意交换两行的次序。  
- 分量必须取原子值，即要求每个分量都是不可再分的数据项。  

#### 3.1.1.4 关系

### 3.1.2 关系操作

### 3.1.3 数据完整性
